<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.example.demo.service.ProductMetasDataService">

    <resultMap id="ProductMetasDataMap" type="com.example.demo.vo.ProductMasterData">
        <id column="id" jdbcType="INTEGER" property="id"/>
        <result column="product_categories" jdbcType="VARCHAR" property="productCategories"/>
        <result column="career_classification" jdbcType="VARCHAR" property="careerClassification"/>
        <result column="vendor_band" jdbcType="VARCHAR" property="vendorBand"/>
        <result column="product_classification" jdbcType="VARCHAR" property="productClassification"/>
        <result column="product_name" jdbcType="VARCHAR" property="productName"/>
        <result column="product_gauge" jdbcType="VARCHAR" property="productGauge"/>
        <result column="creator" jdbcType="VARCHAR" property="creator"/>
        <result column="creation_date" jdbcType="TIMESTAMP" property="creationDate"/>
        <result column="update_date" jdbcType="TIMESTAMP" property="updateDate"/>
        <result column="update_man" jdbcType="VARCHAR" property="updateMan"/>
        <result column="deleted" jdbcType="INTEGER" property="deleted"/>
    </resultMap>


    <select id="quetyByALL"  resultMap="ProductMetasDataMap" >
        SELECT
        metas.id,
        pc.product_categories_name AS product_categories,
        tcc.career_name AS career_classification,
        tvb.vendor_brand_name AS vendor_band,
        tpc.product_classification_name AS product_classification,
        tpn.product_name AS product_name,
        product_gauge AS product_gauge,
        metas.creator AS creator,
        metas.creation_date AS creation_date,
        metas.update_date AS update_date,
        metas.update_man AS update_man,
        metas.deleted AS deleted
        FROM
        t_product_metas_data metas
        INNER JOIN t_product_categories pc ON metas.product_id = pc.id
        INNER JOIN t_career_classification tcc ON metas.career_classification_id = tcc.id
        INNER JOIN t_vendor_brand tvb ON metas.vendor_band_id = tvb.id
        INNER JOIN t_product_classification tpc ON metas.product_classification_id = tpc.id
        INNER JOIN t_product_name tpn ON metas.product_name_id = tpn.id
        INNER JOIN t_product_gauge tpg ON metas.product_gauge_id = tpg.id
        WHERE
        metas.deleted = 0
    </select>

    <select id="selectBycnlum" parameterType="com.example.demo.dto.ProductMetasDataDTO" resultType="int">
        select count(1)
        from t_product_metas_data
        <if test="product_id != null">
            where product_id = #{product_id}
        </if>
        <if test="career_classification_id != null">
            where career_classification_id = #{career_classification_id}
        </if>
<!--        把剩下的补完整-->

    </select>


</mapper>